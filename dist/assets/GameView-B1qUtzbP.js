import{_ as y,o as r,c as l,g as a,n as c,t as h,a as i,F as C,H as P,b as g,f,h as R,i as T,v as k,j as I,k as D,e as p}from"./index-BdaK0R3k.js";import{R as o}from"./RulesEnum-C_PEwwkq.js";const w="/assets/diceGif/dice-1.gif",B={data(){return{dice:{gifPath:null,imgPath:"/assets/diceGif/dice-6.gif",value:null,isRolling:!1}}},props:{value:{type:Number,required:!0}},computed:{dynamicStyle(){return{color:this.dice.value===3?"var(--red)":"var(--white-text)"}}},methods:{lancerDe(){switch(this.dice.value=Math.floor(Math.random()*6)+1,this.dice.isRolling=!0,this.dice.value){case 1:this.dice.gifPath="/assets/diceGif/dice-1-roll.gif",this.dice.imgPath="/assets/diceGif/dice-1.gif";break;case 2:this.dice.gifPath="/assets/diceGif/dice-2-roll.gif",this.dice.imgPath="/assets/diceGif/dice-2.gif";break;case 3:this.dice.gifPath="/assets/diceGif/dice-3-roll.gif",this.dice.imgPath="/assets/diceGif/dice-3.gif";break;case 4:this.dice.gifPath="/assets/diceGif/dice-4-roll.gif",this.dice.imgPath="/assets/diceGif/dice-4.gif";break;case 5:this.dice.gifPath="/assets/diceGif/dice-5-roll.gif",this.dice.imgPath="/assets/diceGif/dice-5.gif";break;case 6:this.dice.gifPath="/assets/diceGif/dice-6-roll.gif",this.dice.imgPath="/assets/diceGif/dice-6.gif";break}this.$emit("value",this.dice.value)},gifLoaded(){setTimeout(()=>{this.dice.isRolling=!1},1500)}}},M=["src"],O=["src"],G={key:2,src:w,alt:"image finale du lancé"};function N(n,e,u,v,s,t){return r(),l("div",null,[s.dice.isRolling?(r(),l("img",{key:0,src:s.dice.gifPath,onLoad:e[0]||(e[0]=(...m)=>t.gifLoaded&&t.gifLoaded(...m)),alt:"gif lancé dés"},null,40,M)):a("",!0),!s.dice.isRolling&&s.dice.value?(r(),l("img",{key:1,src:s.dice.imgPath,alt:"image finale du lancé"},null,8,O)):a("",!0),!s.dice.isRolling&&!s.dice.value?(r(),l("img",G)):a("",!0),s.dice.isRolling?a("",!0):(r(),l("div",{key:3,style:c(t.dynamicStyle)},h(s.dice.value),5))])}const E=y(B,[["render",N],["__scopeId","data-v-e69f3b04"]]),L={data(){return{rules:{},isChange:!1,displayTurn:!0,newtrimman:!1}},props:{result:{type:Object,required:!0},players:{type:Object,required:!0},changeMessage:{type:String},isTriman:{type:Boolean,required:!0}},watch:{result:{handler(){this.handelResult()},immediate:!0,deep:!0},changeMessage:{handler(){this.rules.change=this.changeMessage},immediate:!0,deep:!0}},methods:{handelResult(){this.displayTurn=!0,this.rule={rule1:"",rule2:""},this.result&&(this.isTriman===!1&&(this.result.de1===3||this.result.de2===3||this.result.total===3?(this.rules.rule1=this.players.name+" est triman",this.$emit("isRule",!1),this.isChange=!0,this.displayTurn=!1,this.newtrimman=!0,this.$emit("triman",this.players,this.newtrimman)):(this.isChange=!1,this.$emit("isRule",!1),this.rules.rule1="On cherche un triman")),this.isTriman===!0&&(this.isChange=!1,(this.result.de1===3||this.result.de2===3||this.result.total===3)&&(this.rules.rule2=o.TRIMAN_BOIT.rule),this.result.de1===this.result.de2&&(this.rules.rule1=`${o.DOUBLE.rule} ${this.result.de1} gorgées`),this.result.de1===3&&this.result.de2===3&&(this.rules.rule1="Le triman boit 2 fois",this.rules.rule2=`${o.DOUBLE.rule} ${this.result.de1} gorgées`),this.result.de1===5&&this.result.de2===5&&(this.rules.rule1=o.TU_BOIS.rule,this.rules.rule2=`${o.DOUBLE.rule} ${this.result.de1} gorgées`),this.result.total===9&&(this.rules.rule1=o.GAUCHE_BOIT.rule,(this.result.de1===3||this.result.de1===2)&&(this.rules.rule2=o.TRIMAN_BOIT.rule)),this.result.total===10&&(this.rules.rule1=o.TU_BOIS.rule,(this.result.de1===3||this.result.de1===2)&&(this.rules.rule2=o.TRIMAN_BOIT.rule)),this.result.total===11&&(this.rules.rule1=o.DROITE_BOIT.rule,(this.result.de1===3||this.result.de1===2)&&(this.rules.rule2=o.TRIMAN_BOIT.rule)),!this.rules.rule2&&!this.rules.rule1&&(this.isChange=!0,this.displayTurn=!1,this.$emit("isRule",!1))))},updateRule(){this.rules.rule1=this.changeMessage}}},x={key:0,class:"rule-container"},V={key:0},U={key:1},A={key:2},S={key:3},j={key:1,class:"rule-container"};function q(n,e,u,v,s,t){return r(),l(C,null,[u.result?(r(),l("div",x,[s.displayTurn==!0?(r(),l("p",V,h(u.players.name),1)):a("",!0),s.rules.rule1?(r(),l("p",U,h(s.rules.rule1),1)):a("",!0),s.rules.rule2?(r(),l("p",A,h(s.rules.rule2),1)):a("",!0),s.isChange?(r(),l("p",S,h(s.rules.change),1)):a("",!0)])):a("",!0),u.result?a("",!0):(r(),l("div",j,e[0]||(e[0]=[i("p",null,"Player 1",-1),i("p",null,"A toi de jouer !",-1)])))],64)}const H=y(L,[["render",q],["__scopeId","data-v-9008b6b7"]]),F={RED:{value:"#FF4C4C"},ORANGE:{value:"#f4a261"},YELLOW:{value:"#ffba08"},GREEN:{value:"#75be4d"},LIGTH_BLUE:{value:"#8093f1"},BLUE:{value:"#2266bf"},PURPLE:{value:"#9370DB"},PINK:{value:"#f282a7"}},W={data(){return{triman:{},game:{nbrPlayer:null,players:[],ignorance:!1},dice1:{value:null},dice2:{value:null},isTriman:!1,isCooldown:!1,progress:0,cooldownTime:1500,interval:null,playerInput:null,playerTurn:0,whoTurn:0}},computed:{progressBackground(){return`linear-gradient(to right, rgba(0, 198, 94, 0.6) ${this.progress}%, rgba(0, 189, 94, 1) ${this.progress}%)`},totalDice(){return this.dice1.value+this.dice2.value},dynamicStyleDice(){return{color:this.totalDice===3?"var(--red)":"var(--white-text)",lineHeight:"1em"}},dynamicPlayerColor(){return{background:this.game.players[this.playerTurn].color}}},components:{DiceComponent:E,RulesComponent:H,HelloWorld:P},methods:{handleDice1(n){this.dice1.value=n},handleDice2(n){this.dice2.value=n},callRollDice(){return this.isCooldown!=!0&&(this.startCooldown(),this.$refs.diceComponent1.lancerDe(),this.$refs.diceComponent2.lancerDe()),this.result={total:this.totalDice,de1:this.dice1.value,de2:this.dice2.value},this.result},startCooldown(){this.isCooldown=!0,this.progress=0,this.startTime=performance.now();const n=e=>{const u=e-this.startTime;this.progress=Math.min(u/this.cooldownTime*100,100),u<this.cooldownTime?requestAnimationFrame(n):(this.isCooldown=!1,this.progress=0)};requestAnimationFrame(n)},changePlayer(){return this.game.players[this.playerTurn].id===this.triman.id&&(console.log("end triman"),this.triman={},this.isTriman=!1),this.playerTurn<this.game.players.length&&(this.playerTurn++,this.playerTurn===this.game.players.length&&(this.playerTurn=0),this.updatePlayerRule()),this.playerTurn},setTriman(n,e){this.isTriman=e,this.triman=n},updatePlayerRule(){this.parentMessage=`C'est à ${this.game.players[this.playerTurn].name} de jouer`,this.$emit("changeMessage",this.parentMessage)},setNumberOfPlayers(){if(this.playerInput>=1&&this.playerInput<=8){this.game.nbrPlayer=this.playerInput,this.game.nbrPlayer&&this.$emit("updateNavbarVisibility",!1);const n=Object.values(F).map(e=>e.value);n.sort(()=>Math.random()-.5),this.game.players=Array.from({length:this.playerInput},(e,u)=>({id:u+1,name:`Player ${u+1}`,color:n[u]}))}else alert("Le nombre de joueurs doit être entre 1 et 8.")}}},z={key:0,class:"form-container"},J={class:"form-wrapper"},K={key:1,class:"parent"},Y={class:"div3"},Q={class:"div4"},X={class:"div5"},Z={key:0,class:"total-container"},$={class:"triman-name",style:{color:"#ff6961"}},ee=["disabled"];function se(n,e,u,v,s,t){const m=p("HelloWorld"),_=p("RulesComponent"),b=p("DiceComponent");return r(),l("main",null,[s.game.nbrPlayer?(r(),l("div",K,[i("div",{class:"div1",style:c(t.dynamicPlayerColor)},[!s.isCooldown&&!s.game.ignorance?(r(),D(_,{key:0,onTriman:t.setTriman,onIsRule:t.changePlayer,isTriman:s.isTriman,result:n.result,changeMessage:n.parentMessage,players:s.game.players[s.playerTurn]},null,8,["onTriman","onIsRule","isTriman","result","changeMessage","players"])):a("",!0)],4),i("div",Y,[g(b,{ref:"diceComponent1",onValue:t.handleDice1},null,8,["onValue"])]),i("div",Q,[g(b,{ref:"diceComponent2",onValue:t.handleDice2},null,8,["onValue"])]),i("div",X,[s.triman?(r(),l("div",Z,[e[14]||(e[14]=i("span",null,"Total :",-1)),i("span",$,h(s.triman.name),1)])):a("",!0),e[15]||(e[15]=i("div",null,null,-1)),!s.isCooldown&&t.totalDice?(r(),l("p",{key:1,style:c(t.dynamicStyleDice)},h(t.totalDice),5)):a("",!0)]),i("div",{class:"div6",onClick:e[3]||(e[3]=(...d)=>t.callRollDice&&t.callRollDice(...d)),disabled:s.isCooldown,style:c({background:t.progressBackground})}," Jouer ",12,ee)])):(r(),l("div",z,[g(m,{msg:"Triman !"}),i("div",J,[e[11]||(e[11]=i("h2",null,"Choisissez le nombre de joueurs",-1)),e[12]||(e[12]=f()),e[13]||(e[13]=i("br",null,null,-1)),i("form",{onSubmit:e[2]||(e[2]=R((...d)=>t.setNumberOfPlayers&&t.setNumberOfPlayers(...d),["prevent"]))},[e[4]||(e[4]=i("label",{for:"nbrPlayer"},"Nombre de joueurs (1-8) : ",-1)),T(i("input",{type:"number",id:"nbrPlayer","onUpdate:modelValue":e[0]||(e[0]=d=>s.playerInput=d),min:"2",max:"8",required:""},null,512),[[k,s.playerInput,void 0,{number:!0}]]),e[5]||(e[5]=f()),e[6]||(e[6]=i("br",null,null,-1)),e[7]||(e[7]=f()),e[8]||(e[8]=i("br",null,null,-1)),T(i("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=d=>s.game.ignorance=d),id:"checkboxIgnorance"},null,512),[[I,s.game.ignorance]]),e[9]||(e[9]=i("label",{for:"checkboxIgnorance"}," Règle ignorance",-1)),e[10]||(e[10]=i("button",{class:"btn-submit",type:"submit"},"Commencer",-1))],32)])]))])}const re=y(W,[["render",se],["__scopeId","data-v-970dece7"]]);export{re as default};
